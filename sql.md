# Ответы на вопросы по SQL

- [Ответы на вопросы по SQL](#ответы-на-вопросы-по-sql)
  - [В чем разница между операторами DELETE и TRUNCATE?](#в-чем-разница-между-операторами-delete-и-truncate)
  - [Из каких подмножеств состоит SQL?](#из-каких-подмножеств-состоит-sql)
  - [Что подразумевается под СУБД? Какие существуют типы СУБД?](#что-подразумевается-под-субд-какие-существуют-типы-субд)
  - [Что подразумевается под таблицей и полем в SQL?](#что-подразумевается-под-таблицей-и-полем-в-sql)
  - [Что такое соединения (JOIN) в SQL?](#что-такое-соединения-join-в-sql)
  - [В чем разница между типом данных CHAR и VARCHAR в SQL?](#в-чем-разница-между-типом-данных-char-и-varchar-в-sql)
  - [Что такое первичный ключ (Primary key)?](#что-такое-первичный-ключ-primary-key)
  - [Что такое ограничения (Constraints)?](#что-такое-ограничения-constraints)
  - [В чем разница между SQL и MySQL?](#в-чем-разница-между-sql-и-mysql)
  - [Вопрос 10. Что такое уникальный ключ (Unique key)?](#вопрос-10-что-такое-уникальный-ключ-unique-key)
  - [Что такое внешний ключ (Foreign key)?](#что-такое-внешний-ключ-foreign-key)
  - [Что подразумевается под целостностью данных?](#что-подразумевается-под-целостностью-данных)
  - [В чем разница между кластеризованным и некластеризованным индексами в SQL?](#в-чем-разница-между-кластеризованным-и-некластеризованным-индексами-в-sql)
  - [Напишите SQL-запрос для отображения текущей даты](#напишите-sql-запрос-для-отображения-текущей-даты)
  - [Что вы подразумеваете под денормализацией?](#что-вы-подразумеваете-под-денормализацией)
  - [Что такое сущности и отношения?](#что-такое-сущности-и-отношения)
  - [Что такое индекс?](#что-такое-индекс)
  - [Опишите различные типы индексов](#опишите-различные-типы-индексов)
  - [Что такое нормализация и каковы ее преимущества?](#что-такое-нормализация-и-каковы-ее-преимущества)
  - [В чем разница между командами DROP и TRUNCATE?](#в-чем-разница-между-командами-drop-и-truncate)
  - [Объясните различные типы нормализации](#объясните-различные-типы-нормализации)
  - [Что такое свойство ACID в базе данных?](#что-такое-свойство-acid-в-базе-данных)
  - [Совпадают ли значения NULL со значениями нуля или пробела?](#совпадают-ли-значения-null-со-значениями-нуля-или-пробела)
  - [Выберите только уникальные имена](#выберите-только-уникальные-имена)
- [Ссылки на внешние источники:](#ссылки-на-внешние-источники)

## В чем разница между операторами DELETE и TRUNCATE?

| DELETE | TRUNCATE |
|---|---|
|Используется для удаления строки в таблице | Используется для удаления всех строк из таблицы|
|Вы можете восстановить данные после удаления | Вы не можете восстановить данные (прим. перевод.: операции логируются по разному, но в SQL Server есть возможность сделать откат) транзакции)|
|DML-команда | DDL-команда|
|Медленнее, чем оператор TRUNCATE | Быстрее|

## Из каких подмножеств состоит SQL?

- **DDL (Data Definition Language, язык описания данных)** — позволяет выполнять различные операции с базой данных, такие как CREATE (создание), ALTER (изменение) и DROP (удаление объектов).
- **DML (Data Manipulation Language, язык управления данными)** — позволяет получать доступ к данным и манипулировать ими, например, вставлять, обновлять, удалять и извлекать данные из базы данных.
- **DCL (Data Control Language, язык контролирования данных)** — позволяет контролировать доступ к базе данных. Пример — GRANT (предоставить права), REVOKE (отозвать права).

## Что подразумевается под СУБД? Какие существуют типы СУБД?

База данных — структурированная коллекция данных. Система управления базами данных (СУБД) — программное обеспечение, которое взаимодействует с пользователем, приложениями и самой базой данных для сбора и анализа данных. СУБД позволяет пользователю взаимодействовать с базой данных. Данные, хранящиеся в базе данных, могут быть изменены, извлечены и удалены. Они могут быть любых типов, таких как строки, числа, изображения и т. д.

*Существует два типа СУБД:*

- Реляционная система управления базами данных: данные хранятся в отношениях (таблицах). *Примеры:*
  - MySQL
  - PostgreSQL (объектно-реляционная)
  - MS SQL Server
  - Oracle database
- Нереляционная система управления базами данных: не существует понятия отношений, кортежей и атрибутов. *Примеры*
  - MongoDB
  - Redis (не совсем в том понимании СУБД но вообще да)

## Что подразумевается под таблицей и полем в SQL?

Таблица — организованный набор данных в виде строк и столбцов. Поле — это столбцы в таблице. Например:

## Что такое соединения (JOIN) в SQL?

Для соединения строк из двух или более таблиц на основе связанного между ними столбца используется оператор JOIN. Он используется для объединения двух таблиц или получения данных оттуда. В SQL есть 4 (5) типа соединения, а именно:

- Inner Join (просто Join) (Внутреннее соединение)
- Right Join (Правое соединение)
- Left Join (Левое соединение)
- Full (Outer) Join (Полное соединение)
- *Cross Join* (перекрёстное соеденение) (по факту является декартовым произведенинем строк первой и второй стблицы)

## В чем разница между типом данных CHAR и VARCHAR в SQL?

И Char, и Varchar служат символьными типами данных, но varchar используется для строк символов переменной длины, тогда как Char используется для строк фиксированной длины. Например, char(10) может хранить только 10 символов и не сможет хранить строку любой другой длины, тогда как varchar(10) может хранить строку любой длины до 10, т.е. например 6, 8 или 2.

## Что такое первичный ключ (Primary key)?

- Первичный ключ — столбец или набор столбцов, которые однозначно идентифицируют каждую строку в таблице.
- Однозначно идентифицирует одну строку в таблице
- Нулевые (Null) значения не допускаются

## Что такое ограничения (Constraints)?

Ограничения (constraints) используются для указания ограничения на тип данных таблицы (на поле таблицы). Они могут быть указаны при создании или изменении таблицы.

Пример ограничений:

- NOT NULL
- CHECK
- DEFAULT
- UNIQUE
- PRIMARY KEY
- FOREIGN KEY

## В чем разница между SQL и MySQL?

**SQL** — стандартный язык структурированных запросов (Structured Query Language) на основе английского языка, тогда как **MySQL** — система управления базами данных.

**SQL** — язык реляционной базы данных, который используется для доступа и управления данными, **MySQL** — реляционная СУБД (система управления базами данных), также как и SQL Server, Informix и т.д.

## Вопрос 10. Что такое уникальный ключ (Unique key)?

- Однозначно идентифицирует одну строку в таблице.
- Допустимо множество уникальных ключей в одной таблице.
- Допустимы NULL-значения (прим. перевод.: зависит от СУБД, в SQL Server значение NULL может быть добавлено только один раз в поле с UNIQUE KEY).

## Что такое внешний ключ (Foreign key)?

- Внешний ключ поддерживает ссылочную целостность, обеспечивая связь между данными в двух таблицах.
- Внешний ключ в дочерней таблице ссылается на первичный ключ в родительской таблице.
- Ограничение внешнего ключа предотвращает действия, которые разрушают связи между дочерней и родительской таблицами.

## Что подразумевается под целостностью данных?

Целостность данных определяет точность, а также согласованность данных, хранящихся в базе данных. Она также определяет ограничения целостности для обеспечения соблюдения бизнес-правил для данных, когда они вводятся в приложение или базу данных.

## В чем разница между кластеризованным и некластеризованным индексами в SQL?

*Различия между кластеризованным и некластеризованным индексами в SQL:*

- Кластерный индекс используется для простого и быстрого извлечения данных из базы данных, тогда как чтение из некластеризованного индекса происходит относительно медленнее.
- Кластеризованный индекс изменяет способ хранения записей в базе данных — он сортирует строки по столбцу, который установлен как кластеризованный индекс, тогда как в некластеризованном индексе он не меняет способ хранения, но создает отдельный объект внутри таблицы, который указывает на исходные строки таблицы при поиске.
- Одна таблица может иметь только один кластеризованный индекс, тогда как некластеризованных у нее может быть много.

## Напишите SQL-запрос для отображения текущей даты

В SQL есть встроенная функция `GetDate()`, которая помогает возвращать текущий timestamp/дату.

> Зависит от СУБД, нужно смотреть в доку конкретной реализации, как луче получит дату в конкретной задаче

## Что вы подразумеваете под денормализацией?

**Денормализация** — техника, которая используется для преобразования из высших к низшим нормальным формам. Она помогает разработчикам баз данных повысить производительность всей инфраструктуры, поскольку вносит избыточность в таблицу. Она добавляет избыточные данные в таблицу, учитывая частые запросы к базе данных, которые объединяют данные из разных таблиц в одну таблицу.

## Что такое сущности и отношения?

**Сущности**: человек, место или объект в реальном мире, данные о которых могут храниться в базе данных. В таблицах хранятся данные, которые представляют один тип сущности. Например — база данных банка имеет таблицу клиентов для хранения информации о клиентах. Таблица клиентов хранит эту информацию в виде набора атрибутов (столбцы в таблице) для каждого клиента.

**Отношения**: отношения или связи между сущностями, которые имеют какое-то отношение друг к другу. Например — имя клиента связано с номером учетной записи клиента и контактной информацией, которая может быть в той же таблице. Также могут быть отношения между отдельными таблицами (например, клиент к счетам).

## Что такое индекс?

Индексы относятся к методу настройки производительности, позволяющему быстрее извлекать записи из таблицы. Индекс создает отдельную структуру для индексируемого поля и, следовательно, позволяет быстрее получать данные.

## Опишите различные типы индексов

Есть три типа индексов, а именно:

1. **Уникальный индекс (Unique Index)**: этот индекс не позволяет полю иметь повторяющиеся значения, если столбец индексируется уникально. Если первичный ключ определен, уникальный индекс может быть применен автоматически.
2. **Кластеризованный индекс (Clustered Index)**: этот индекс меняет физический порядок таблицы и выполняет поиск на основе значений ключа. Каждая таблица может иметь только один кластеризованный индекс.
3. **Некластеризованный индекс (Non-Clustered Index)**: не изменяет физический порядок таблицы и поддерживает логический порядок данных. Каждая таблица может иметь много некластеризованных индексов.

## Что такое нормализация и каковы ее преимущества?

**Нормализация** — процесс организации данных, цель которого избежать дублирования и избыточности. Некоторые из преимуществ:

- Лучшая организация базы данных
- Больше таблиц с небольшими строками
- Эффективный доступ к данным
- Большая гибкость для запросов
- Проще реализовать безопасность данных
- Позволяет легко модифицировать
- Сокращение избыточных и дублирующихся данных
- Более компактная база данных
- Обеспечивает согласованность данных после внесения изменений

## В чем разница между командами DROP и TRUNCATE?

Команда DROP удаляет саму таблицу, и нельзя сделать Rollback команды, тогда как команда TRUNCATE удаляет все строки из таблицы (прим. перевод.: в SQL Server Rollback нормально отработает и откатит DROP).

## Объясните различные типы нормализации

- Первая нормальная форма (1NF) — нет повторяющихся групп в строках
- Вторая нормальная форма (2NF) — каждое неключевое (поддерживающее) значение столбца зависит от всего первичного ключа
- Третья нормальная форма (3NF) — каждое неключевое значение зависит только от первичного ключа и не имеет зависимости от другого неключевого значения столбца

## Что такое свойство ACID в базе данных?

Принцип (свойство ) **ACID** означает:

- **атомарность (Atomicity)**  
Гарантирует, что транзакция будет полностью выполнена или потерпит неудачу, где транзакция представляет одну логическую операцию данных. Это означает, что при сбое одной части любой транзакции происходит сбой всей транзакции и состояние базы данных остается неизменным.
- **согласованность (Consistency)**  
Гарантирует, что данные должны соответствовать всем правилам валидации. Проще говоря, вы можете сказать, что ваша транзакция никогда не оставит вашу базу данных в недопустимом состоянии.
- **изолированность (Isolation)**  
Основной целью изолированности является контроль механизма параллельного изменения данных.
- **долговечность (Durability)**  
Долговечность подразумевает, что если транзакция была подтверждена (COMMIT), произошедшие в рамках транзакции изменения сохранятся независимо от того, что может встать у них на пути (например, потеря питания, сбой или ошибки любого рода).

Он используется для обеспечения надежной обработки транзакций данных в системе базы данных.

## Совпадают ли значения NULL со значениями нуля или пробела?

Значение NULL вовсе не равно нулю или пробелу. Значение NULL представляет значение, которое недоступно, неизвестно, присвоено или неприменимо, тогда как ноль — это число, а пробел — символ.

NULL <> 1 -> FALSE  
NULL == 0 -> FALSE  
NULL == NULL -> FALSE  
NULL IS NULL -> TRUE  

## Выберите только уникальные имена

```sql
SELECT DISTINCT name FROM users;
```

`SELECT DISTINCT` возвращает разные значения, даже если в выбранном столбце есть дубли.

# Ссылки на внешние источники:

- [27 распространённых вопросов по SQL с собеседований и ответы на них](https://tproger.ru/articles/sql-interview-questions/)
- [Топ-65 вопросов по SQL с собеседований, к которым вы должны подготовиться в 2019 году. Часть I](https://habr.com/ru/company/otus/blog/461067/)
- [Вопросы по SQL и Базам Данных на интервью ВИДЕО](https://www.youtube.com/watch?v=obIqX-PhgHo)
